var wordClock=new function(){this.defaults={theme:"glass",staticTime:"off",staticSetTime:"Thu, 01 Jan 1970 12:25:00",dispTime:"off",refreshRate:1E3};this.settings={};var b;this.setOptions=function(a){a=$.extend({},this.defaults,a);switch(a.dispTime){case "on":$(".dispTime").data("time-permanent",1).html("");break;case "off":$(".dispTime").data("time-permanent",0).html("clock");break;default:this.error('Invalid dispTime option. Must be "on" or "off"')}switch(a.staticTime){case "on":var c=new Date(a.staticSetTime);
"Invalid Date"!=c&&NaN!=c||this.error("Invalid dateformat used in staticSetTime");break;case "off":break;default:this.error('Invalid staticTime option.  Must be "on" or "off"')}"number"!=typeof a.refreshRate&&this.error("refreshRate must be a number(in milliseconds)");return a};this.initClock=function(a){this.settings=this.setOptions(a);that=this;$("#theme").val()!=$("#themeStyle").attr("data-theme")&&this.setTheme();b=setInterval(function(){that.refreshClock()},this.settings.refreshRate);return this};
this.refreshClock=function(){$(".clockPhrase").each(function(a,c){var b=$(c);1==b.data("time-permanent")?b.addClass("active"):b.removeClass("active")});this.minuteCircuit();this.hourCircuit();"on"==this.settings.dispTime&&this.dispTime();return this};this.setTheme=function(){var a=this.settings.theme;$("#themeStyle").attr("href","/themes/"+a+"/"+a+".css").attr("data-theme",a)};this.dispTime=function(){$(".dispTime").text(this.getHours()+":"+this.getMinutes()+":"+this.getSeconds());return this};this.error=
function(a){clearInterval(b);$("body").html('<div class="error">Error: '+a+"</div>")};this.getTime=function(){if("off"==this.settings.staticTime)var a=new Date;else"on"==this.settings.staticTime?a=new Date(this.settings.staticSetTime):this.error("StaticTime incorrect value");return a};this.getHours=function(){var a=this.getTime().getHours();if(12<a)return a-12;if(0==a||24==a)a=12;return a};this.getMinutes=function(){return this.getTime().getMinutes()};this.getSeconds=function(){return this.getTime().getSeconds()};
this.displayOn=function(a,b){$("[data-time-"+a+'="'+b+'"]').addClass("active");return this};this.displayOff=function(a,b){$("[data-time-"+a+'="'+b+'"]').removeClass("active");return this};this.hourCircuit=function(){var a=this.timeOffset(),b=this.getHours();this.displayOn("hours",12<b+a?1:b+a);0==this.getMinutes()%5&&0!=this.getMinutes()?this.displayOff("hours",0):this.displayOn("hours",0);return this};this.minuteCircuit=function(){switch(60-this.getMinutes()){case 5:case 55:this.displayOn("minutes",
5);this.displayOn("minutes",0);break;case 10:case 50:this.displayOn("minutes",10);this.displayOn("minutes",0);break;case 15:case 45:this.displayOn("minutes",15);break;case 20:case 40:this.displayOn("minutes",20);this.displayOn("minutes",0);break;case 25:case 35:this.displayOn("minutes",20);this.displayOn("minutes",5);this.displayOn("minutes",0);break;case 30:this.displayOn("minutes",30);break;default:null}return this};this.timeOffset=function(){return 0==this.getMinutes()%5&&30>=this.getMinutes()&&
0!=this.getMinutes()?(this.displayOn("offset",1),0):0==this.getMinutes()%5&&30<this.getMinutes()?(this.displayOn("offset",0),1):0};return this};function startClock(b){wordClock.initClock(b)};var clockSettings={opts:{theme:"glass",staticTime:"off",staticSetTime:"Thu, 01 Jan 1970 12:25:00",dispTime:"off",refreshRate:1E3},initSettings:function(){$("#showtime").is(":checked")?this.opts.dispTime="on":this.opts.dispTime="off";$("#statictime").is(":checked")?this.opts.staticTime="on":this.opts.staticTime="off";this.opts.theme=$("#theme").val();$("#statictime").is(":checked")?this.staticTimeManual():$(".staticInput").hide();return this},staticTimeManual:function(){$(".staticInput").show();var b=
$("input.staticHours").val(),a=$("input.staticMinutes").val();b?b=$("input.staticHours").val():b=12;a?a=$("input.staticMinutes").val():a=25;this.opts.staticSetTime="Thu, 01 Jan 1970 "+b+":"+a+":00"},applySettings:function(){this.initSettings();startClock(this.opts);return this}};$(".switch").on("click",function(){clockSettings.applySettings()});$(".staticInput input, #theme").on("change",function(){clockSettings.applySettings()});
